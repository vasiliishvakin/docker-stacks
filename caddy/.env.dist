# Caddy + Tailscale Environment Configuration
# Copy this file to .env and configure with your values
# Documentation: https://caddyserver.com/docs/ and https://tailscale.com/kb/1282/docker

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# Tailscale Authentication Key
# Generate at: https://login.tailscale.com/admin/settings/keys
# Recommended: Use ephemeral, reusable auth keys with appropriate tags
TS_AUTHKEY=

# Caddy configuration directory path
# This should be an absolute path to your Caddy configuration directory
CADDY_CONF_PATH=

# ============================================================================
# TAILSCALE CONFIGURATION
# ============================================================================

# Tailscale version (default: latest)
TS_VERSION=latest

# Hostname for container (default: tailscale-caddy)
HOSTNAME=tailscale-caddy

# Tailscale hostname shown in admin console (default: caddy)
TS_HOSTNAME=caddy

# Accept DNS configuration from Tailscale (default: true)
TS_ACCEPT_DNS=true

# Authenticate only once (default: true)
TS_AUTH_ONCE=true

# Tailscale state volume (default: tailscale_state)
TS_DATA_VOLUME=tailscale_state

# ============================================================================
# CADDY CONFIGURATION
# ============================================================================

# Caddy Docker image (default: vasiliishvakin/caddy:2)
CADDY_IMAGE=vasiliishvakin/caddy:2

# Workspace volume (must be created externally)
WORKSPACE_VOLUME=workspace

# Caddy data volume for certificates and other data (default: caddy_data)
CADDY_DATA_VOLUME=caddy_data

# Caddy config volume for internal configuration (default: caddy_config)
CADDY_CONFIG_VOLUME=caddy_config

# ============================================================================
# NETWORK CONFIGURATION
# ============================================================================

# Internal Docker network (default: internal)
NETWORK_NAME=internal

# DNS Configuration
# Primary DNS server (default: Cloudflare)
DNS=1.1.1.1

# Fallback DNS server (default: Google DNS)
DNS_FALLBACK=8.8.8.8

# ============================================================================
# CONTAINER CONFIGURATION
# ============================================================================

# Container restart policy
# Options: no, always, on-failure, unless-stopped
RESTART_POLICY=unless-stopped

# ============================================================================
# NOTES
# ============================================================================

# Volume setup:
# The following volumes should be created:
#   docker volume create workspace (external, shared with other services)
#   docker volume create caddy_data
#   docker volume create caddy_config
#   docker volume create tailscale_state
