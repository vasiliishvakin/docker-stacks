# Caddy Environment Configuration

# ============================================================================
# REQUIRED
# ============================================================================

# Path to Caddy configuration directory
CADDY_CONF_PATH=

# ============================================================================
# NETWORK
# ============================================================================

# Network mode: container:tailscale | bridge
# When using container:tailscale, ensure Tailscale stack is running first
NETWORK_MODE=container:tailscale

# ============================================================================
# IMAGE & VOLUMES
# ============================================================================

CADDY_IMAGE=vasiliishvakin/caddy:2
WORKSPACE=workspace
CADDY_DATA=caddy_data
CADDY_DATA_EXTERNAL=true

# ============================================================================
# CONTAINER
# ============================================================================

# Restart policy: no | always | on-failure | unless-stopped
RESTART_POLICY=unless-stopped

# ============================================================================
# NOTES
# ============================================================================

# Volume setup:
#   docker volume create workspace
#   docker volume create caddy_data
#
# Access when using container:tailscale mode:
#   - Configure ports in tailscale/compose.override.yaml
#   - Access via https://<tailscale-hostname>
#
# Access via local network:
#   - Set NETWORK_MODE=bridge
#   - Add ports to compose.yaml (80:80, 443:443)