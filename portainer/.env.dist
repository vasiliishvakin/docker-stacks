# Portainer Environment Configuration
# Copy this file to .env and configure with your values
# Documentation: https://docs.portainer.io/

# ============================================================================
# NETWORK CONFIGURATION
# ============================================================================

# Network mode for Portainer container
# Options:
#   - container:tailscale  (use existing Tailscale container network - recommended for security)
#   - container:shared     (use shared Docker network)
# Note: When using container:tailscale, ensure the Tailscale stack is running first
NETWORK_MODE=container:tailscale

# ============================================================================
# PORTAINER CONFIGURATION
# ============================================================================

# Portainer Docker image (default: portainer/portainer-ce:lts)
PORTAINER_IMAGE=portainer/portainer-ce:lts

# Portainer Agent Secret (optional)
# Used to secure communication between Portainer and remote agents
# Generate a secure random string: openssl rand -base64 32
# Leave empty if not using Portainer agents
AGENT_SECRET=

# ============================================================================
# CONTAINER CONFIGURATION
# ============================================================================

# Container restart policy
# Options: no, always, on-failure, unless-stopped
RESTART_POLICY=unless-stopped

# ============================================================================
# NOTES & USAGE
# ============================================================================

# Volume setup:
# 1. Add 'portainer_data' to infrastructure/.env VOLUMES line
# 2. Run: cd infrastructure && task init

# Accessing Portainer:
# When using NETWORK_MODE=container:tailscale:
#   - Ensure the Tailscale stack is running: docker ps | grep tailscale
#   - Configure ports in tailscale/compose.override.yaml:
#     services:
#       tailscale:
#         ports:
#           - "9000:9000"   # Portainer HTTP
#           - "9443:9443"   # Portainer HTTPS
#   - Portainer will be accessible via Tailscale at:
#     - HTTP: http://<tailscale-hostname>:9000
#     - HTTPS: https://<tailscale-hostname>:9443
#   - More secure - only accessible via your Tailscale network
#
# To access via local network instead:
#   - Set NETWORK_MODE=container:shared or remove the network_mode line
#   - Add back the ports and networks sections in compose.yaml

# Prerequisites:
# - Tailscale stack must be deployed and running first
# - Check with: docker ps | grep tailscale
# - The tailscale container name must match (default: tailscale)
# - Configure ports in tailscale/compose.override.yaml
