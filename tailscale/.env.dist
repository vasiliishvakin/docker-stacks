# Tailscale Docker Environment Configuration
# Copy this file to .env and configure with your values
# Documentation: https://tailscale.com/kb/1282/docker

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# Tailscale Authentication Key
# Generate at: https://login.tailscale.com/admin/settings/keys
# Recommended: Use ephemeral, reusable auth keys with appropriate tags
TS_AUTHKEY=

# ============================================================================
# NETWORK CONFIGURATION
# ============================================================================

# External Docker network (should match your infrastructure setup)
NETWORK_NAME=shared

# Static IP address for this node within the Docker network
# Ensure it does not conflict with other devices on the network
IP=

# DNS Configuration
# Primary DNS server (default: Cloudflare)
DNS_PRIMARY=1.1.1.1

# Secondary DNS server (default: Google DNS)
DNS_SECONDARY=8.8.8.8

# Accept DNS configuration from Tailscale (true/false)
# When true, uses DNS servers configured in your tailnet
TS_ACCEPT_DNS=true

# ============================================================================
# NODE CONFIGURATION
# ============================================================================

# Hostname for this node
# This will be the name shown in the Tailscale admin console
HOSTNAME=tailscale

# ============================================================================
# ADVANCED TAILSCALE OPTIONS
# ============================================================================

# Advertise as exit node (true/false)
# When true, routes all traffic through this node
TS_ADVERTISE_EXIT_NODE=false

# Advertise subnet routes (comma-separated CIDR notation)
# Example: Make Docker network accessible via Tailscale
# TS_ADVERTISE_ROUTES=172.24.0.0/24
# Multiple subnets: TS_ADVERTISE_ROUTES=172.24.0.0/24,10.0.0.0/24
TS_ADVERTISE_ROUTES=

# Tailscale tags (comma-separated, for ACL management)
# Example: tag:container,tag:server
TS_TAGS=

# Enable SSH via Tailscale (true/false)
# Default: false (SSH is disabled)
TS_SSH=false

# Accept routes advertised by other nodes (true/false)
TS_ACCEPT_ROUTES=false

# ============================================================================
# PORT CONFIGURATION
# ============================================================================

# To expose ports for services using this Tailscale network:
# 1. Copy compose.override.yaml.example to compose.override.yaml
# 2. Edit compose.override.yaml to add/remove ports as needed
# 3. Docker Compose will automatically merge both files
#
# Example compose.override.yaml:
# services:
#   tailscale:
#     ports:
#       - "9000:9000"   # Portainer HTTP
#       - "9443:9443"   # Portainer HTTPS
#       - "8080:80"     # Additional service
#
# This approach allows unlimited ports without .env variable limits

# ============================================================================
# CONTAINER CONFIGURATION
# ============================================================================

# Container restart policy
# Options: no, always, on-failure, unless-stopped
RESTART_POLICY=unless-stopped

# ============================================================================
# NOTES & EXAMPLES
# ============================================================================

# Example 1: Basic setup with tags
# TS_AUTHKEY=tskey-auth-xxxxx
# HOSTNAME=docker-server
# TS_TAGS=tag:server

# Example 2: Exit node setup
# TS_ADVERTISE_EXIT_NODE=true
# TS_TAGS=tag:exit-node

# Example 3: Subnet router for Docker network
# TS_ADVERTISE_ROUTES=172.24.0.0/24
# TS_TAGS=tag:router

# Example 4: Full-featured setup
# TS_ADVERTISE_ROUTES=172.24.0.0/24
# TS_TAGS=tag:container
# TS_ACCEPT_ROUTES=true

# Security best practices:
# - Use ephemeral auth keys for temporary nodes
# - Use reusable auth keys with tags for permanent infrastructure
# - Never commit .env file with real auth keys to git
# - Rotate auth keys periodically
# - Use ACLs to restrict access between nodes
